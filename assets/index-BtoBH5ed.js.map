{"version":3,"file":"index-BtoBH5ed.js","sources":["../../src/math.ts","../../src/font.ts","../../src/renderer.ts","../../src/input.ts","../../src/audio.ts","../../src/entities/ship.ts","../../src/entities/asteroid.ts","../../src/entities/bullet.ts","../../src/entities/debris.ts","../../src/collision.ts","../../src/game.ts","../../src/main.ts"],"sourcesContent":["import type { Vector2 } from './types';\n\n// Basic vector operations\n\nexport function add(a: Vector2, b: Vector2): Vector2 {\n  return { x: a.x + b.x, y: a.y + b.y };\n}\n\nexport function subtract(a: Vector2, b: Vector2): Vector2 {\n  return { x: a.x - b.x, y: a.y - b.y };\n}\n\nexport function scale(v: Vector2, scalar: number): Vector2 {\n  return { x: v.x * scalar, y: v.y * scalar };\n}\n\nexport function magnitude(v: Vector2): number {\n  return Math.sqrt(v.x * v.x + v.y * v.y);\n}\n\nexport function normalize(v: Vector2): Vector2 {\n  const mag = magnitude(v);\n  if (mag === 0) return { x: 0, y: 0 };\n  return { x: v.x / mag, y: v.y / mag };\n}\n\nexport function rotate(point: Vector2, angle: number): Vector2 {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return {\n    x: point.x * cos - point.y * sin,\n    y: point.x * sin + point.y * cos,\n  };\n}\n\nexport function distance(a: Vector2, b: Vector2): number {\n  const dx = b.x - a.x;\n  const dy = b.y - a.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n// Returns a random float between min and max\nexport function randomRange(min: number, max: number): number {\n  return min + Math.random() * (max - min);\n}\n\n// Returns a random integer between min and max (inclusive)\nexport function randomInt(min: number, max: number): number {\n  return Math.floor(randomRange(min, max + 1));\n}\n\n// Wraps a position around screen boundaries\nexport function wrapPosition(position: Vector2, width: number, height: number): Vector2 {\n  let { x, y } = position;\n\n  if (x < 0) x += width;\n  if (x > width) x -= width;\n  if (y < 0) y += height;\n  if (y > height) y -= height;\n\n  return { x, y };\n}\n\n// Direction vector from an angle (0 = right, increases counterclockwise)\n// For our game, 0 = up, so we offset by -90 degrees\nexport function angleToVector(angle: number): Vector2 {\n  return {\n    x: Math.sin(angle),\n    y: -Math.cos(angle),\n  };\n}\n","import type { Vector2 } from './types';\n\n// Vector font - each character is defined as a series of line segments\n// Coordinates are on a 5x7 grid (width x height)\n\ntype Glyph = Vector2[][]; // Array of line segments, each segment is [start, end]\n\nconst GLYPHS: Record<string, Glyph> = {\n  A: [\n    [{ x: 0, y: 7 }, { x: 0, y: 2 }],\n    [{ x: 0, y: 2 }, { x: 2.5, y: 0 }],\n    [{ x: 2.5, y: 0 }, { x: 5, y: 2 }],\n    [{ x: 5, y: 2 }, { x: 5, y: 7 }],\n    [{ x: 0, y: 4 }, { x: 5, y: 4 }],\n  ],\n  B: [\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 2.5 }],\n    [{ x: 5, y: 2.5 }, { x: 4, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 0, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 5, y: 4.5 }],\n    [{ x: 5, y: 4.5 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 0, y: 7 }],\n  ],\n  C: [\n    [{ x: 5, y: 1 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 6 }],\n  ],\n  D: [\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 0 }, { x: 3, y: 0 }],\n    [{ x: 3, y: 0 }, { x: 5, y: 2 }],\n    [{ x: 5, y: 2 }, { x: 5, y: 5 }],\n    [{ x: 5, y: 5 }, { x: 3, y: 7 }],\n    [{ x: 3, y: 7 }, { x: 0, y: 7 }],\n  ],\n  E: [\n    [{ x: 5, y: 0 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 7 }, { x: 5, y: 7 }],\n    [{ x: 0, y: 3.5 }, { x: 4, y: 3.5 }],\n  ],\n  F: [\n    [{ x: 5, y: 0 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 3.5 }, { x: 4, y: 3.5 }],\n  ],\n  G: [\n    [{ x: 5, y: 1 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 5, y: 4 }],\n    [{ x: 5, y: 4 }, { x: 3, y: 4 }],\n  ],\n  H: [\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 5, y: 0 }, { x: 5, y: 7 }],\n    [{ x: 0, y: 3.5 }, { x: 5, y: 3.5 }],\n  ],\n  I: [\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 2.5, y: 0 }, { x: 2.5, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n  ],\n  J: [\n    [{ x: 1, y: 0 }, { x: 5, y: 0 }],\n    [{ x: 3.5, y: 0 }, { x: 3.5, y: 6 }],\n    [{ x: 3.5, y: 6 }, { x: 2.5, y: 7 }],\n    [{ x: 2.5, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n  ],\n  K: [\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 5, y: 0 }, { x: 0, y: 3.5 }],\n    [{ x: 0, y: 3.5 }, { x: 5, y: 7 }],\n  ],\n  L: [\n    [{ x: 0, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 7 }, { x: 5, y: 7 }],\n  ],\n  M: [\n    [{ x: 0, y: 7 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 2.5, y: 4 }],\n    [{ x: 2.5, y: 4 }, { x: 5, y: 0 }],\n    [{ x: 5, y: 0 }, { x: 5, y: 7 }],\n  ],\n  N: [\n    [{ x: 0, y: 7 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 5, y: 7 }],\n    [{ x: 5, y: 7 }, { x: 5, y: 0 }],\n  ],\n  O: [\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n  ],\n  P: [\n    [{ x: 0, y: 7 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 3 }],\n    [{ x: 5, y: 3 }, { x: 4, y: 4 }],\n    [{ x: 4, y: 4 }, { x: 0, y: 4 }],\n  ],\n  Q: [\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 5 }],\n    [{ x: 5, y: 5 }, { x: 4, y: 6 }],\n    [{ x: 4, y: 6 }, { x: 5, y: 7 }],\n    [{ x: 4, y: 6 }, { x: 1, y: 6 }],\n    [{ x: 1, y: 6 }, { x: 0, y: 5 }],\n    [{ x: 0, y: 5 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n    [{ x: 3, y: 5 }, { x: 5, y: 7 }],\n  ],\n  R: [\n    [{ x: 0, y: 7 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 3 }],\n    [{ x: 5, y: 3 }, { x: 4, y: 4 }],\n    [{ x: 4, y: 4 }, { x: 0, y: 4 }],\n    [{ x: 2, y: 4 }, { x: 5, y: 7 }],\n  ],\n  S: [\n    [{ x: 5, y: 1 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 0, y: 2.5 }],\n    [{ x: 0, y: 2.5 }, { x: 1, y: 3.5 }],\n    [{ x: 1, y: 3.5 }, { x: 4, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 5, y: 4.5 }],\n    [{ x: 5, y: 4.5 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n  ],\n  T: [\n    [{ x: 0, y: 0 }, { x: 5, y: 0 }],\n    [{ x: 2.5, y: 0 }, { x: 2.5, y: 7 }],\n  ],\n  U: [\n    [{ x: 0, y: 0 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 5, y: 0 }],\n  ],\n  V: [\n    [{ x: 0, y: 0 }, { x: 2.5, y: 7 }],\n    [{ x: 2.5, y: 7 }, { x: 5, y: 0 }],\n  ],\n  W: [\n    [{ x: 0, y: 0 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 2.5, y: 4 }],\n    [{ x: 2.5, y: 4 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 0 }],\n  ],\n  X: [\n    [{ x: 0, y: 0 }, { x: 5, y: 7 }],\n    [{ x: 5, y: 0 }, { x: 0, y: 7 }],\n  ],\n  Y: [\n    [{ x: 0, y: 0 }, { x: 2.5, y: 3.5 }],\n    [{ x: 5, y: 0 }, { x: 2.5, y: 3.5 }],\n    [{ x: 2.5, y: 3.5 }, { x: 2.5, y: 7 }],\n  ],\n  Z: [\n    [{ x: 0, y: 0 }, { x: 5, y: 0 }],\n    [{ x: 5, y: 0 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 7 }, { x: 5, y: 7 }],\n  ],\n  '0': [\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n    [{ x: 0, y: 6 }, { x: 5, y: 1 }],\n  ],\n  '1': [\n    [{ x: 1, y: 1 }, { x: 2.5, y: 0 }],\n    [{ x: 2.5, y: 0 }, { x: 2.5, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n  ],\n  '2': [\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 2.5 }],\n    [{ x: 5, y: 2.5 }, { x: 0, y: 7 }],\n    [{ x: 0, y: 7 }, { x: 5, y: 7 }],\n  ],\n  '3': [\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 2.5 }],\n    [{ x: 5, y: 2.5 }, { x: 4, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 2, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 5, y: 4.5 }],\n    [{ x: 5, y: 4.5 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n  ],\n  '4': [\n    [{ x: 4, y: 7 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 0, y: 5 }],\n    [{ x: 0, y: 5 }, { x: 5, y: 5 }],\n  ],\n  '5': [\n    [{ x: 5, y: 0 }, { x: 0, y: 0 }],\n    [{ x: 0, y: 0 }, { x: 0, y: 3 }],\n    [{ x: 0, y: 3 }, { x: 4, y: 3 }],\n    [{ x: 4, y: 3 }, { x: 5, y: 4 }],\n    [{ x: 5, y: 4 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n  ],\n  '6': [\n    [{ x: 4, y: 0 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 5, y: 4.5 }],\n    [{ x: 5, y: 4.5 }, { x: 4, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 0, y: 3.5 }],\n  ],\n  '7': [\n    [{ x: 0, y: 0 }, { x: 5, y: 0 }],\n    [{ x: 5, y: 0 }, { x: 2, y: 7 }],\n  ],\n  '8': [\n    [{ x: 1, y: 0 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 5, y: 2.5 }],\n    [{ x: 5, y: 2.5 }, { x: 4, y: 3.5 }],\n    [{ x: 4, y: 3.5 }, { x: 1, y: 3.5 }],\n    [{ x: 1, y: 3.5 }, { x: 0, y: 2.5 }],\n    [{ x: 0, y: 2.5 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 1, y: 0 }],\n    [{ x: 4, y: 3.5 }, { x: 5, y: 4.5 }],\n    [{ x: 5, y: 4.5 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 1, y: 7 }],\n    [{ x: 1, y: 7 }, { x: 0, y: 6 }],\n    [{ x: 0, y: 6 }, { x: 0, y: 4.5 }],\n    [{ x: 0, y: 4.5 }, { x: 1, y: 3.5 }],\n  ],\n  '9': [\n    [{ x: 1, y: 7 }, { x: 4, y: 7 }],\n    [{ x: 4, y: 7 }, { x: 5, y: 6 }],\n    [{ x: 5, y: 6 }, { x: 5, y: 1 }],\n    [{ x: 5, y: 1 }, { x: 4, y: 0 }],\n    [{ x: 4, y: 0 }, { x: 1, y: 0 }],\n    [{ x: 1, y: 0 }, { x: 0, y: 1 }],\n    [{ x: 0, y: 1 }, { x: 0, y: 2.5 }],\n    [{ x: 0, y: 2.5 }, { x: 1, y: 3.5 }],\n    [{ x: 1, y: 3.5 }, { x: 5, y: 3.5 }],\n  ],\n  ':': [\n    [{ x: 2.5, y: 2 }, { x: 2.5, y: 2.5 }],\n    [{ x: 2.5, y: 5 }, { x: 2.5, y: 5.5 }],\n  ],\n  ' ': [],\n};\n\nconst CHAR_WIDTH = 5;\nconst CHAR_HEIGHT = 7;\nconst CHAR_SPACING = 1.5;\n\nexport interface TextSegment {\n  start: Vector2;\n  end: Vector2;\n}\n\nexport function getTextSegments(\n  text: string,\n  x: number,\n  y: number,\n  scale: number\n): TextSegment[] {\n  const segments: TextSegment[] = [];\n  const upperText = text.toUpperCase();\n\n  let cursorX = x;\n\n  for (const char of upperText) {\n    const glyph = GLYPHS[char];\n    if (glyph) {\n      for (const line of glyph) {\n        segments.push({\n          start: {\n            x: cursorX + line[0].x * scale,\n            y: y + line[0].y * scale,\n          },\n          end: {\n            x: cursorX + line[1].x * scale,\n            y: y + line[1].y * scale,\n          },\n        });\n      }\n    }\n    cursorX += (CHAR_WIDTH + CHAR_SPACING) * scale;\n  }\n\n  return segments;\n}\n\nexport function getTextWidth(text: string, scale: number): number {\n  return text.length * (CHAR_WIDTH + CHAR_SPACING) * scale - CHAR_SPACING * scale;\n}\n\nexport function getTextHeight(scale: number): number {\n  return CHAR_HEIGHT * scale;\n}\n","import type { Vector2, Shape, Transform } from './types';\nimport { rotate, add } from './math';\nimport { getTextSegments, getTextWidth } from './font';\n\n// Batched renderer - collects all draw calls and renders them together\n// to minimize state changes and improve performance\n\ninterface LineBatch {\n  segments: { start: Vector2; end: Vector2; alpha: number }[];\n  color: string;\n  lineWidth: number;\n}\n\ninterface PointBatch {\n  points: { pos: Vector2; alpha: number }[];\n  color: string;\n  radius: number;\n}\n\nexport class Renderer {\n  private ctx: CanvasRenderingContext2D;\n  readonly width: number;\n  readonly height: number;\n\n  // Glow effect configuration\n  public glowEnabled: boolean = true;\n  public glowIntensity: number = 1;\n\n  // Batches keyed by color+lineWidth\n  private lineBatches: Map<string, LineBatch> = new Map();\n  private pointBatches: Map<string, PointBatch> = new Map();\n\n  constructor(canvas: HTMLCanvasElement) {\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Could not get 2D context from canvas');\n    }\n    this.ctx = ctx;\n\n    this.width = 800;\n    this.height = 600;\n    canvas.width = this.width;\n    canvas.height = this.height;\n  }\n\n  clear(): void {\n    // Use semi-transparent black for retro motion blur effect\n    this.ctx.globalAlpha = 1.0;\n    this.ctx.fillStyle = '#000';\n    this.ctx.fillRect(0, 0, this.width, this.height);\n    this.ctx.globalAlpha = 1;\n    this.lineBatches.clear();\n    this.pointBatches.clear();\n  }\n\n  // Queue a shape for batched rendering\n  drawShape(shape: Shape, transform: Transform, color = '#0ff', lineWidth = 2): void {\n    if (shape.length < 2) return;\n\n    const { position, rotation, scale } = transform;\n\n    // Transform all points\n    const transformed = shape.map((point) => {\n      const scaled = { x: point.x * scale, y: point.y * scale };\n      const rotated = rotate(scaled, rotation);\n      return add(rotated, position);\n    });\n\n    // Add line segments to batch\n    for (let i = 0; i < transformed.length; i++) {\n      const next = (i + 1) % transformed.length;\n      this.addLineToBatch(transformed[i], transformed[next], color, lineWidth, 1);\n    }\n  }\n\n  // Queue a line for batched rendering\n  drawLine(start: Vector2, end: Vector2, color = '#0ff', lineWidth = 2, alpha = 1): void {\n    this.addLineToBatch(start, end, color, lineWidth, alpha);\n  }\n\n  // Queue a point for batched rendering\n  drawPoint(position: Vector2, radius = 3, color = '#0ff'): void {\n    const key = `${color}-${radius}`;\n    let batch = this.pointBatches.get(key);\n    if (!batch) {\n      batch = { points: [], color, radius };\n      this.pointBatches.set(key, batch);\n    }\n    batch.points.push({ pos: position, alpha: 1 });\n  }\n\n  // Queue text for batched rendering\n  drawText(text: string, x: number, y: number, scale = 3, color = '#0ff'): void {\n    const textWidth = getTextWidth(text, scale);\n    const startX = x - textWidth / 2;\n    const segments = getTextSegments(text, startX, y, scale);\n    const lineWidth = Math.max(1, scale * 0.4);\n\n    for (const segment of segments) {\n      this.addLineToBatch(segment.start, segment.end, color, lineWidth, 1);\n    }\n  }\n\n  private addLineToBatch(\n    start: Vector2,\n    end: Vector2,\n    color: string,\n    lineWidth: number,\n    alpha: number\n  ): void {\n    const key = `${color}-${lineWidth}`;\n    let batch = this.lineBatches.get(key);\n    if (!batch) {\n      batch = { segments: [], color, lineWidth };\n      this.lineBatches.set(key, batch);\n    }\n    batch.segments.push({ start, end, alpha });\n  }\n\n  // Call this at the end of each frame to actually render everything\n  flush(): void {\n    // Render all line batches\n    for (const batch of this.lineBatches.values()) {\n      this.renderLineBatch(batch);\n    }\n\n    // Render all point batches\n    for (const batch of this.pointBatches.values()) {\n      this.renderPointBatch(batch);\n    }\n  }\n\n  private renderLineBatch(batch: LineBatch): void {\n    const { segments, color, lineWidth } = batch;\n    if (segments.length === 0) return;\n\n    // Check if all segments have the same alpha\n    const allSameAlpha = segments.every((s) => s.alpha === segments[0].alpha);\n\n    if (allSameAlpha) {\n      // Fast path: single draw call for all segments\n      this.ctx.globalAlpha = segments[0].alpha;\n      this.ctx.strokeStyle = color;\n      this.ctx.lineCap = 'round';\n      this.ctx.lineJoin = 'round';\n\n      // Glow pass (optional)\n      if (this.glowEnabled) {\n        this.ctx.lineWidth = lineWidth + 1;\n        this.ctx.shadowColor = color;\n        this.ctx.shadowBlur = this.glowIntensity;\n\n        this.ctx.beginPath();\n        for (const seg of segments) {\n          this.ctx.moveTo(seg.start.x, seg.start.y);\n          this.ctx.lineTo(seg.end.x, seg.end.y);\n        }\n        this.ctx.stroke();\n      }\n\n      // Solid pass\n      this.ctx.shadowBlur = 0;\n      this.ctx.lineWidth = lineWidth;\n\n      this.ctx.beginPath();\n      for (const seg of segments) {\n        this.ctx.moveTo(seg.start.x, seg.start.y);\n        this.ctx.lineTo(seg.end.x, seg.end.y);\n      }\n      this.ctx.stroke();\n\n      this.ctx.globalAlpha = 1;\n    } else {\n      // Slow path: need to handle different alphas\n      this.ctx.strokeStyle = color;\n      this.ctx.lineCap = 'round';\n      this.ctx.lineJoin = 'round';\n\n      for (const seg of segments) {\n        this.ctx.globalAlpha = seg.alpha;\n\n        // Glow pass (optional)\n        if (this.glowEnabled) {\n          this.ctx.lineWidth = lineWidth + 1;\n          this.ctx.shadowColor = color;\n          this.ctx.shadowBlur = this.glowIntensity;\n          this.ctx.beginPath();\n          this.ctx.moveTo(seg.start.x, seg.start.y);\n          this.ctx.lineTo(seg.end.x, seg.end.y);\n          this.ctx.stroke();\n        }\n\n        // Solid pass\n        this.ctx.shadowBlur = 0;\n        this.ctx.lineWidth = lineWidth;\n        this.ctx.beginPath();\n        this.ctx.moveTo(seg.start.x, seg.start.y);\n        this.ctx.lineTo(seg.end.x, seg.end.y);\n        this.ctx.stroke();\n      }\n      this.ctx.globalAlpha = 1;\n    }\n  }\n\n  private renderPointBatch(batch: PointBatch): void {\n    const { points, color, radius } = batch;\n    if (points.length === 0) return;\n\n    // Glow pass (optional)\n    if (this.glowEnabled) {\n      this.ctx.fillStyle = color;\n      this.ctx.shadowColor = color;\n      this.ctx.shadowBlur = this.glowIntensity;\n\n      this.ctx.beginPath();\n      for (const p of points) {\n        this.ctx.moveTo(p.pos.x + radius, p.pos.y);\n        this.ctx.arc(p.pos.x, p.pos.y, radius, 0, Math.PI * 2);\n      }\n      this.ctx.fill();\n    }\n\n    // Bright center pass\n    this.ctx.shadowBlur = 0;\n    this.ctx.fillStyle = this.glowEnabled ? '#fff' : color;\n\n    this.ctx.beginPath();\n    for (const p of points) {\n      const centerRadius = this.glowEnabled ? radius * 0.5 : radius;\n      this.ctx.moveTo(p.pos.x + centerRadius, p.pos.y);\n      this.ctx.arc(p.pos.x, p.pos.y, centerRadius, 0, Math.PI * 2);\n    }\n    this.ctx.fill();\n  }\n}\n","import type { KeyState } from './types';\n\n// Handles keyboard input and tracks which keys are currently pressed\n\nexport class InputHandler {\n  private keys: KeyState = {\n    left: false,\n    right: false,\n    thrust: false,\n    fire: false,\n  };\n\n  private firePressed = false;\n  private startPressed = false;\n  private spaceWasReleased = true; // Require release before new start press\n  private glowTogglePressed = false;\n\n  constructor() {\n    window.addEventListener('keydown', this.handleKeyDown.bind(this));\n    window.addEventListener('keyup', this.handleKeyUp.bind(this));\n  }\n\n  private handleKeyDown(e: KeyboardEvent): void {\n    this.updateKey(e.code, true);\n\n    // Prevent scrolling with arrow keys or space\n    if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Space'].includes(e.code)) {\n      e.preventDefault();\n    }\n  }\n\n  private handleKeyUp(e: KeyboardEvent): void {\n    this.updateKey(e.code, false);\n  }\n\n  private updateKey(code: string, isDown: boolean): void {\n    switch (code) {\n      case 'ArrowLeft':\n      case 'KeyA':\n        this.keys.left = isDown;\n        break;\n      case 'ArrowRight':\n      case 'KeyD':\n        this.keys.right = isDown;\n        break;\n      case 'ArrowUp':\n      case 'KeyW':\n        this.keys.thrust = isDown;\n        break;\n      case 'Space':\n        this.keys.fire = isDown;\n        if (isDown) {\n          this.firePressed = true;\n          // Only register start if space was released first\n          if (this.spaceWasReleased) {\n            this.startPressed = true;\n            this.spaceWasReleased = false;\n          }\n        } else {\n          this.spaceWasReleased = true;\n        }\n        break;\n      case 'KeyG':\n        if (isDown) {\n          this.glowTogglePressed = true;\n        }\n        break;\n    }\n  }\n\n  getKeys(): KeyState {\n    return { ...this.keys };\n  }\n\n  // Check if fire was just pressed (for single-shot firing)\n  consumeFirePress(): boolean {\n    if (this.firePressed) {\n      this.firePressed = false;\n      return true;\n    }\n    return false;\n  }\n\n  // Check if player pressed start\n  consumeStartPress(): boolean {\n    if (this.startPressed) {\n      this.startPressed = false;\n      return true;\n    }\n    return false;\n  }\n\n  // Check if player pressed glow toggle\n  consumeGlowTogglePress(): boolean {\n    if (this.glowTogglePressed) {\n      this.glowTogglePressed = false;\n      return true;\n    }\n    return false;\n  }\n}\n","// Simple retro sound effects using the Web Audio API\n// All sounds are synthesized, no external files needed\n\nexport class AudioManager {\n  private ctx: AudioContext | null = null;\n  private initialized = false;\n\n  // Lazy init because browsers require user interaction first\n  private ensureContext(): AudioContext | null {\n    if (!this.initialized) {\n      try {\n        this.ctx = new AudioContext();\n        this.initialized = true;\n      } catch {\n        // Audio not supported, just silently fail\n        this.initialized = true;\n      }\n    }\n    return this.ctx;\n  }\n\n  playShoot(): void {\n    const ctx = this.ensureContext();\n    if (!ctx) return;\n\n    const osc = ctx.createOscillator();\n    const gain = ctx.createGain();\n\n    osc.connect(gain);\n    gain.connect(ctx.destination);\n\n    osc.type = 'square';\n    osc.frequency.setValueAtTime(880, ctx.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(110, ctx.currentTime + 0.1);\n\n    gain.gain.setValueAtTime(0.3, ctx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);\n\n    osc.start(ctx.currentTime);\n    osc.stop(ctx.currentTime + 0.1);\n  }\n\n  playExplosion(size: 'small' | 'medium' | 'large'): void {\n    const ctx = this.ensureContext();\n    if (!ctx) return;\n\n    // Different explosion sounds based on asteroid size\n    const duration = size === 'large' ? 0.4 : size === 'medium' ? 0.25 : 0.15;\n    const startFreq = size === 'large' ? 100 : size === 'medium' ? 150 : 200;\n\n    const osc = ctx.createOscillator();\n    const gain = ctx.createGain();\n\n    osc.connect(gain);\n    gain.connect(ctx.destination);\n\n    osc.type = 'sawtooth';\n    osc.frequency.setValueAtTime(startFreq, ctx.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(20, ctx.currentTime + duration);\n\n    gain.gain.setValueAtTime(0.4, ctx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);\n\n    osc.start(ctx.currentTime);\n    osc.stop(ctx.currentTime + duration);\n  }\n\n  playThrust(): void {\n    const ctx = this.ensureContext();\n    if (!ctx) return;\n\n    // White noise burst for thrust\n    const bufferSize = ctx.sampleRate * 0.05;\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n\n    const noise = ctx.createBufferSource();\n    const gain = ctx.createGain();\n    const filter = ctx.createBiquadFilter();\n\n    noise.buffer = buffer;\n    filter.type = 'lowpass';\n    filter.frequency.value = 1000;\n\n    noise.connect(filter);\n    filter.connect(gain);\n    gain.connect(ctx.destination);\n\n    gain.gain.setValueAtTime(0.1, ctx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.05);\n\n    noise.start(ctx.currentTime);\n  }\n\n  playDeath(): void {\n    const ctx = this.ensureContext();\n    if (!ctx) return;\n\n    // Descending tone for player death\n    const osc = ctx.createOscillator();\n    const gain = ctx.createGain();\n\n    osc.connect(gain);\n    gain.connect(ctx.destination);\n\n    osc.type = 'sawtooth';\n    osc.frequency.setValueAtTime(440, ctx.currentTime);\n    osc.frequency.exponentialRampToValueAtTime(55, ctx.currentTime + 0.8);\n\n    gain.gain.setValueAtTime(0.4, ctx.currentTime);\n    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.8);\n\n    osc.start(ctx.currentTime);\n    osc.stop(ctx.currentTime + 0.8);\n  }\n\n  playLevelUp(): void {\n    const ctx = this.ensureContext();\n    if (!ctx) return;\n\n    // Ascending arpeggio for level complete\n    const notes = [262, 330, 392, 523]; // C major arpeggio\n    notes.forEach((freq, i) => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n\n      osc.connect(gain);\n      gain.connect(ctx.destination);\n\n      osc.type = 'square';\n      osc.frequency.value = freq;\n\n      const startTime = ctx.currentTime + i * 0.1;\n      gain.gain.setValueAtTime(0, startTime);\n      gain.gain.linearRampToValueAtTime(0.2, startTime + 0.02);\n      gain.gain.exponentialRampToValueAtTime(0.01, startTime + 0.15);\n\n      osc.start(startTime);\n      osc.stop(startTime + 0.15);\n    });\n  }\n}\n","import type { Entity, Shape, Vector2 } from '../types';\nimport { add, scale, angleToVector, magnitude } from '../math';\n\n// The player's ship - a classic triangle design\n\nconst SHIP_SHAPE: Shape = [\n  { x: 0, y: -15 }, // nose\n  { x: 10, y: 12 }, // right wing\n  { x: 0, y: 6 }, // back center notch\n  { x: -10, y: 12 }, // left wing\n];\n\n// Thruster flame shapes - we alternate between these for a flickering effect\nexport const THRUSTER_SHAPES: Shape[] = [\n  // Small flame\n  [\n    { x: -4, y: 8 },\n    { x: 0, y: 16 },\n    { x: 4, y: 8 },\n  ],\n  // Medium flame\n  [\n    { x: -5, y: 8 },\n    { x: -2, y: 14 },\n    { x: 0, y: 22 },\n    { x: 2, y: 14 },\n    { x: 5, y: 8 },\n  ],\n  // Large flame\n  [\n    { x: -5, y: 8 },\n    { x: -3, y: 18 },\n    { x: 0, y: 26 },\n    { x: 3, y: 18 },\n    { x: 5, y: 8 },\n  ],\n];\n\nconst ROTATION_SPEED = 5; // radians per second\nconst THRUST_POWER = 200; // acceleration in pixels per second squared\nconst MAX_SPEED = 400;\n\nexport class Ship implements Entity {\n  transform = {\n    position: { x: 0, y: 0 },\n    rotation: 0,\n    scale: 1,\n  };\n  velocity: Vector2 = { x: 0, y: 0 };\n  angularVelocity = 0;\n  shape = SHIP_SHAPE;\n  radius = 12;\n  isActive = true;\n\n  isThrusting = false;\n  invulnerableTime = 0; // seconds of invulnerability remaining\n\n  constructor(x: number, y: number) {\n    this.transform.position = { x, y };\n  }\n\n  reset(x: number, y: number): void {\n    this.transform.position = { x, y };\n    this.transform.rotation = 0;\n    this.velocity = { x: 0, y: 0 };\n    this.isActive = true;\n    this.invulnerableTime = 3; // 3 seconds of invulnerability on respawn\n  }\n\n  rotateLeft(dt: number): void {\n    this.transform.rotation -= ROTATION_SPEED * dt;\n  }\n\n  rotateRight(dt: number): void {\n    this.transform.rotation += ROTATION_SPEED * dt;\n  }\n\n  thrust(dt: number): void {\n    this.isThrusting = true;\n    const direction = angleToVector(this.transform.rotation);\n    const acceleration = scale(direction, THRUST_POWER * dt);\n    this.velocity = add(this.velocity, acceleration);\n\n    // Cap the speed\n    const speed = magnitude(this.velocity);\n    if (speed > MAX_SPEED) {\n      this.velocity = scale(this.velocity, MAX_SPEED / speed);\n    }\n  }\n\n  update(dt: number): void {\n    // Update position\n    this.transform.position = add(this.transform.position, scale(this.velocity, dt));\n\n    // Count down invulnerability\n    if (this.invulnerableTime > 0) {\n      this.invulnerableTime -= dt;\n    }\n  }\n\n  getNosePosition(): Vector2 {\n    // Get the position of the ship's nose for spawning bullets\n    const direction = angleToVector(this.transform.rotation);\n    return add(this.transform.position, scale(direction, 15));\n  }\n\n  isInvulnerable(): boolean {\n    return this.invulnerableTime > 0;\n  }\n}\n","import type { Entity, Shape, Vector2, AsteroidSize } from '../types';\nimport { add, scale, randomRange, randomInt } from '../math';\n\n// Asteroids come in three sizes and have irregular shapes\n\nconst SIZE_CONFIG = {\n  large: { radius: 40, minVerts: 10, maxVerts: 14, speed: 50, points: 20 },\n  medium: { radius: 20, minVerts: 8, maxVerts: 10, speed: 80, points: 50 },\n  small: { radius: 10, minVerts: 6, maxVerts: 8, speed: 120, points: 100 },\n};\n\nfunction generateAsteroidShape(size: AsteroidSize): Shape {\n  const config = SIZE_CONFIG[size];\n  const numVerts = randomInt(config.minVerts, config.maxVerts);\n  const shape: Shape = [];\n\n  // Generate vertices around a circle with random variation\n  for (let i = 0; i < numVerts; i++) {\n    const angle = (i / numVerts) * Math.PI * 2;\n    // Vary the radius between 70% and 100% for that rocky look\n    const r = config.radius * randomRange(0.7, 1.0);\n    shape.push({\n      x: Math.cos(angle) * r,\n      y: Math.sin(angle) * r,\n    });\n  }\n\n  return shape;\n}\n\nexport class Asteroid implements Entity {\n  transform = {\n    position: { x: 0, y: 0 },\n    rotation: 0,\n    scale: 1,\n  };\n  velocity: Vector2 = { x: 0, y: 0 };\n  angularVelocity: number;\n  shape: Shape;\n  radius: number;\n  isActive = true;\n  size: AsteroidSize;\n  points: number;\n\n  constructor(x: number, y: number, size: AsteroidSize, direction?: Vector2) {\n    this.size = size;\n    const config = SIZE_CONFIG[size];\n\n    this.transform.position = { x, y };\n    this.shape = generateAsteroidShape(size);\n    this.radius = config.radius;\n    this.points = config.points;\n\n    // Random spin\n    this.angularVelocity = randomRange(-2, 2);\n\n    // Random or specified direction\n    if (direction) {\n      this.velocity = scale(direction, config.speed);\n    } else {\n      const angle = randomRange(0, Math.PI * 2);\n      this.velocity = {\n        x: Math.cos(angle) * config.speed,\n        y: Math.sin(angle) * config.speed,\n      };\n    }\n  }\n\n  update(dt: number): void {\n    this.transform.position = add(this.transform.position, scale(this.velocity, dt));\n    this.transform.rotation += this.angularVelocity * dt;\n  }\n\n  // When destroyed, large asteroids split into medium, medium into small\n  split(): Asteroid[] {\n    if (this.size === 'small') {\n      return [];\n    }\n\n    const nextSize: AsteroidSize = this.size === 'large' ? 'medium' : 'small';\n    const { x, y } = this.transform.position;\n\n    // Spawn 2 smaller asteroids going in different directions\n    const angle1 = randomRange(0, Math.PI * 2);\n    const angle2 = angle1 + Math.PI / 2 + randomRange(-0.5, 0.5);\n\n    return [\n      new Asteroid(x, y, nextSize, { x: Math.cos(angle1), y: Math.sin(angle1) }),\n      new Asteroid(x, y, nextSize, { x: Math.cos(angle2), y: Math.sin(angle2) }),\n    ];\n  }\n}\n","import type { Entity, Shape, Vector2 } from '../types';\nimport { add, scale } from '../math';\n\n// Bullets are simple fast-moving points\n\nconst BULLET_SPEED = 500;\nconst BULLET_LIFETIME = 1.5; // seconds before despawning\n\nexport class Bullet implements Entity {\n  transform = {\n    position: { x: 0, y: 0 },\n    rotation: 0,\n    scale: 1,\n  };\n  velocity: Vector2;\n  angularVelocity = 0;\n  shape: Shape = []; // Bullets are drawn as points, not shapes\n  radius = 2;\n  isActive = true;\n\n  private lifetime: number;\n\n  constructor(x: number, y: number, direction: Vector2) {\n    this.transform.position = { x, y };\n    this.velocity = scale(direction, BULLET_SPEED);\n    this.lifetime = BULLET_LIFETIME;\n  }\n\n  update(dt: number): void {\n    this.transform.position = add(this.transform.position, scale(this.velocity, dt));\n\n    this.lifetime -= dt;\n    if (this.lifetime <= 0) {\n      this.isActive = false;\n    }\n  }\n}\n","import type { Vector2 } from '../types';\nimport { add, scale, rotate, randomRange } from '../math';\n\n// A single piece of debris - a line segment that drifts and fades\n\nexport interface DebrisLine {\n  start: Vector2;\n  end: Vector2;\n  velocity: Vector2;\n  angularVelocity: number;\n  rotation: number;\n  lifetime: number;\n  maxLifetime: number;\n}\n\nconst DEBRIS_LIFETIME = 2; // seconds\nconst DEBRIS_SPEED = 80;\n\nexport class Debris {\n  lines: DebrisLine[] = [];\n  isActive = true;\n\n  constructor(position: Vector2, shipRotation: number, shipShape: Vector2[]) {\n    // Break the ship shape into individual line segments\n    for (let i = 0; i < shipShape.length; i++) {\n      const nextIndex = (i + 1) % shipShape.length;\n\n      // Transform points by ship rotation\n      const start = rotate(shipShape[i], shipRotation);\n      const end = rotate(shipShape[nextIndex], shipRotation);\n\n      // Each line gets its own random velocity\n      const angle = randomRange(0, Math.PI * 2);\n      const speed = randomRange(DEBRIS_SPEED * 0.5, DEBRIS_SPEED);\n\n      this.lines.push({\n        start: add(position, start),\n        end: add(position, end),\n        velocity: { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed },\n        angularVelocity: randomRange(-3, 3),\n        rotation: 0,\n        lifetime: DEBRIS_LIFETIME,\n        maxLifetime: DEBRIS_LIFETIME,\n      });\n    }\n  }\n\n  update(dt: number): void {\n    let anyActive = false;\n\n    for (const line of this.lines) {\n      if (line.lifetime <= 0) continue;\n\n      // Move the line segment\n      const delta = scale(line.velocity, dt);\n      line.start = add(line.start, delta);\n      line.end = add(line.end, delta);\n\n      // Rotate around the midpoint\n      line.rotation += line.angularVelocity * dt;\n      const mid = {\n        x: (line.start.x + line.end.x) / 2,\n        y: (line.start.y + line.end.y) / 2,\n      };\n\n      // Rotate start and end around midpoint\n      const halfLen = {\n        x: (line.end.x - line.start.x) / 2,\n        y: (line.end.y - line.start.y) / 2,\n      };\n      const rotatedHalf = rotate(halfLen, line.angularVelocity * dt);\n      line.start = { x: mid.x - rotatedHalf.x, y: mid.y - rotatedHalf.y };\n      line.end = { x: mid.x + rotatedHalf.x, y: mid.y + rotatedHalf.y };\n\n      line.lifetime -= dt;\n      if (line.lifetime > 0) {\n        anyActive = true;\n      }\n    }\n\n    this.isActive = anyActive;\n  }\n\n  getAlpha(line: DebrisLine): number {\n    // Fade out over the last half of lifetime\n    if (line.lifetime < line.maxLifetime / 2) {\n      return line.lifetime / (line.maxLifetime / 2);\n    }\n    return 1;\n  }\n}\n","import type { Entity } from './types';\nimport { distance } from './math';\n\n// Simple circle-based collision detection\n// Good enough for asteroids and feels pretty accurate\n\nexport function checkCollision(a: Entity, b: Entity): boolean {\n  if (!a.isActive || !b.isActive) {\n    return false;\n  }\n\n  const dist = distance(a.transform.position, b.transform.position);\n  return dist < a.radius + b.radius;\n}\n\n// Check if an entity is out of bounds and needs to wrap\nexport function wrapEntity(entity: Entity, width: number, height: number): void {\n  const pos = entity.transform.position;\n  const margin = entity.radius;\n\n  if (pos.x < -margin) {\n    pos.x = width + margin;\n  } else if (pos.x > width + margin) {\n    pos.x = -margin;\n  }\n\n  if (pos.y < -margin) {\n    pos.y = height + margin;\n  } else if (pos.y > height + margin) {\n    pos.y = -margin;\n  }\n}\n","import type { GameData } from './types';\nimport { Renderer } from './renderer';\nimport { InputHandler } from './input';\nimport { AudioManager } from './audio';\nimport { Ship, Asteroid, Bullet, THRUSTER_SHAPES, Debris } from './entities';\nimport { checkCollision, wrapEntity } from './collision';\nimport { angleToVector, randomRange } from './math';\n\nconst FIRE_COOLDOWN = 0.25; // minimum seconds between shots\nconst STARTING_ASTEROIDS = 4;\n\nexport class Game {\n  private renderer: Renderer;\n  private input: InputHandler;\n  private audio: AudioManager;\n\n  private ship: Ship;\n  private asteroids: Asteroid[] = [];\n  private bullets: Bullet[] = [];\n  private debris: Debris[] = [];\n\n  private data: GameData = {\n    score: 0,\n    lives: 3,\n    level: 1,\n    state: 'start',\n  };\n\n  private fireCooldown = 0;\n  private lastTime = 0;\n  private respawnTimer = 0;\n  private gameOverTimer = 0;\n\n  // FPS tracking\n  private frameCount = 0;\n  private fpsTime = 0;\n  private fpsEl: HTMLElement;\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.renderer = new Renderer(canvas);\n    this.input = new InputHandler();\n    this.audio = new AudioManager();\n\n    // Create ship at center\n    this.ship = new Ship(this.renderer.width / 2, this.renderer.height / 2);\n\n    // FPS counter element\n    this.fpsEl = document.getElementById('fps-counter')!;\n  }\n\n  start(): void {\n    this.lastTime = performance.now();\n    requestAnimationFrame(this.loop.bind(this));\n  }\n\n  private loop(currentTime: number): void {\n    const dt = Math.min((currentTime - this.lastTime) / 1000, 0.1); // cap delta time\n    this.lastTime = currentTime;\n\n    // Update FPS counter\n    this.frameCount++;\n    this.fpsTime += dt;\n    if (this.fpsTime >= 1) {\n      this.fpsEl.textContent = `FPS: ${this.frameCount}`;\n      this.frameCount = 0;\n      this.fpsTime = 0;\n    }\n\n    this.update(dt);\n    this.render();\n\n    requestAnimationFrame(this.loop.bind(this));\n  }\n\n  private update(dt: number): void {\n    // Handle glow toggle in any state\n    if (this.input.consumeGlowTogglePress()) {\n      this.renderer.glowEnabled = !this.renderer.glowEnabled;\n    }\n\n    if (this.data.state === 'start') {\n      if (this.input.consumeStartPress()) {\n        this.startGame();\n      }\n      return;\n    }\n\n    if (this.data.state === 'gameOver') {\n      // Countdown to return to menu\n      this.gameOverTimer -= dt;\n      if (this.gameOverTimer <= 0) {\n        this.resetGame();\n        return;\n      }\n      // Or press space to play again immediately\n      if (this.input.consumeStartPress()) {\n        this.resetGame();\n        this.startGame();\n      }\n      return;\n    }\n\n    // Handle respawn timer\n    if (this.respawnTimer > 0) {\n      this.respawnTimer -= dt;\n      if (this.respawnTimer <= 0) {\n        this.ship.reset(this.renderer.width / 2, this.renderer.height / 2);\n      }\n    }\n\n    // Update cooldowns\n    if (this.fireCooldown > 0) {\n      this.fireCooldown -= dt;\n    }\n\n    // Handle input\n    const keys = this.input.getKeys();\n    this.ship.isThrusting = false;\n\n    if (this.ship.isActive) {\n      if (keys.left) {\n        this.ship.rotateLeft(dt);\n      }\n      if (keys.right) {\n        this.ship.rotateRight(dt);\n      }\n      if (keys.thrust) {\n        this.ship.thrust(dt);\n        this.audio.playThrust();\n      }\n      if (this.input.consumeFirePress() && this.fireCooldown <= 0) {\n        this.fire();\n      }\n    }\n\n    // Update entities\n    this.ship.update(dt);\n    wrapEntity(this.ship, this.renderer.width, this.renderer.height);\n\n    for (const asteroid of this.asteroids) {\n      asteroid.update(dt);\n      wrapEntity(asteroid, this.renderer.width, this.renderer.height);\n    }\n\n    for (const bullet of this.bullets) {\n      bullet.update(dt);\n      wrapEntity(bullet, this.renderer.width, this.renderer.height);\n    }\n\n    // Update debris\n    for (const d of this.debris) {\n      d.update(dt);\n    }\n    this.debris = this.debris.filter((d) => d.isActive);\n\n    // Remove inactive bullets\n    this.bullets = this.bullets.filter((b) => b.isActive);\n\n    // Check collisions\n    this.checkBulletCollisions();\n    this.checkShipCollision();\n\n    // Check if level is complete\n    if (this.asteroids.length === 0) {\n      this.nextLevel();\n    }\n  }\n\n  private fire(): void {\n    const pos = this.ship.getNosePosition();\n    const dir = angleToVector(this.ship.transform.rotation);\n    this.bullets.push(new Bullet(pos.x, pos.y, dir));\n    this.fireCooldown = FIRE_COOLDOWN;\n    this.audio.playShoot();\n  }\n\n  private checkBulletCollisions(): void {\n    const newAsteroids: Asteroid[] = [];\n\n    for (const bullet of this.bullets) {\n      for (const asteroid of this.asteroids) {\n        if (checkCollision(bullet, asteroid)) {\n          bullet.isActive = false;\n          asteroid.isActive = false;\n          this.data.score += asteroid.points;\n\n          this.audio.playExplosion(asteroid.size);\n\n          // Split the asteroid\n          newAsteroids.push(...asteroid.split());\n          break;\n        }\n      }\n    }\n\n    // Remove destroyed asteroids and add new ones\n    this.asteroids = this.asteroids.filter((a) => a.isActive);\n    this.asteroids.push(...newAsteroids);\n  }\n\n  private checkShipCollision(): void {\n    if (!this.ship.isActive || this.ship.isInvulnerable()) {\n      return;\n    }\n\n    for (const asteroid of this.asteroids) {\n      if (checkCollision(this.ship, asteroid)) {\n        this.shipDestroyed();\n        break;\n      }\n    }\n  }\n\n  private shipDestroyed(): void {\n    // Create debris from the ship breaking apart\n    this.debris.push(\n      new Debris(this.ship.transform.position, this.ship.transform.rotation, this.ship.shape)\n    );\n\n    this.ship.isActive = false;\n    this.data.lives--;\n\n    this.audio.playDeath();\n\n    if (this.data.lives <= 0) {\n      this.data.state = 'gameOver';\n      this.gameOverTimer = 10; // 10 seconds before returning to menu\n    } else {\n      this.respawnTimer = 2; // 2 seconds before respawn\n    }\n  }\n\n  private nextLevel(): void {\n    this.data.level++;\n\n    this.audio.playLevelUp();\n\n    // Spawn more asteroids each level\n    const numAsteroids = STARTING_ASTEROIDS + this.data.level - 1;\n    this.spawnAsteroids(numAsteroids);\n  }\n\n  private spawnAsteroids(count: number): void {\n    for (let i = 0; i < count; i++) {\n      // Spawn asteroids away from the ship\n      let x: number, y: number;\n      do {\n        x = randomRange(0, this.renderer.width);\n        y = randomRange(0, this.renderer.height);\n      } while (\n        Math.abs(x - this.ship.transform.position.x) < 100 &&\n        Math.abs(y - this.ship.transform.position.y) < 100\n      );\n\n      this.asteroids.push(new Asteroid(x, y, 'large'));\n    }\n  }\n\n  private startGame(): void {\n    this.data.state = 'playing';\n    this.spawnAsteroids(STARTING_ASTEROIDS);\n  }\n\n  private resetGame(): void {\n    this.data = {\n      score: 0,\n      lives: 3,\n      level: 1,\n      state: 'start',\n    };\n    this.asteroids = [];\n    this.bullets = [];\n    this.debris = [];\n    this.ship.reset(this.renderer.width / 2, this.renderer.height / 2);\n    this.respawnTimer = 0;\n  }\n\n  private drawHUD(): void {\n    // Draw score on the left\n    this.renderer.drawText(`SCORE: ${this.data.score}`, 100, 25, 2, '#0ff');\n    // Draw lives in the center\n    this.renderer.drawText(`LIVES: ${this.data.lives}`, this.renderer.width / 2, 25, 2, '#0ff');\n    // Draw level on the right\n    this.renderer.drawText(`LEVEL: ${this.data.level}`, this.renderer.width - 100, 25, 2, '#0ff');\n    // Draw glow status in bottom right\n    const glowStatus = this.renderer.glowEnabled ? 'ON' : 'OFF';\n    this.renderer.drawText(\n      `G: GLOW ${glowStatus}`,\n      this.renderer.width - 80,\n      this.renderer.height - 20,\n      1.5,\n      this.renderer.glowEnabled ? '#0f0' : '#666'\n    );\n  }\n\n  private render(): void {\n    this.renderer.clear();\n\n    if (this.data.state === 'start') {\n      // Draw start screen with vector text\n      this.renderer.drawText(\n        'BATTLEOIDS',\n        this.renderer.width / 2,\n        this.renderer.height / 2 - 80,\n        6\n      );\n      this.renderer.drawText(\n        'PRESS SPACE TO START',\n        this.renderer.width / 2,\n        this.renderer.height / 2,\n        3,\n        '#0ff'\n      );\n      this.renderer.drawText(\n        'ARROWS OR WASD TO MOVE',\n        this.renderer.width / 2,\n        this.renderer.height / 2 + 60,\n        2,\n        '#f0f'\n      );\n      this.renderer.drawText(\n        'SPACE TO SHOOT',\n        this.renderer.width / 2,\n        this.renderer.height / 2 + 90,\n        2,\n        '#f0f'\n      );\n      this.renderer.flush();\n      return;\n    }\n\n    // Draw asteroids in magenta/pink\n    for (const asteroid of this.asteroids) {\n      this.renderer.drawShape(asteroid.shape, asteroid.transform, '#f0f');\n    }\n\n    // Draw bullets in yellow\n    for (const bullet of this.bullets) {\n      this.renderer.drawPoint(bullet.transform.position, 3, '#ff0');\n    }\n\n    // Draw debris in cyan (same as ship)\n    for (const d of this.debris) {\n      for (const line of d.lines) {\n        if (line.lifetime > 0) {\n          const alpha = d.getAlpha(line);\n          this.renderer.drawLine(line.start, line.end, '#0ff', 2, alpha);\n        }\n      }\n    }\n\n    // Draw ship in cyan (with blinking when invulnerable)\n    if (this.ship.isActive) {\n      const shouldDraw = !this.ship.isInvulnerable() || Math.floor(Date.now() / 100) % 2 === 0;\n\n      if (shouldDraw) {\n        this.renderer.drawShape(this.ship.shape, this.ship.transform, '#0ff');\n\n        // Draw thruster flame when thrusting - randomly pick a flame shape for flicker\n        if (this.ship.isThrusting) {\n          const flameIndex = Math.floor(Math.random() * THRUSTER_SHAPES.length);\n          this.renderer.drawShape(THRUSTER_SHAPES[flameIndex], this.ship.transform, '#f80');\n        }\n      }\n    }\n\n    // Draw game over text\n    if (this.data.state === 'gameOver') {\n      this.renderer.drawText(\n        'GAME OVER',\n        this.renderer.width / 2,\n        this.renderer.height / 2 - 40,\n        5\n      );\n      this.renderer.drawText(\n        `FINAL SCORE: ${this.data.score}`,\n        this.renderer.width / 2,\n        this.renderer.height / 2 + 20,\n        3\n      );\n      this.renderer.drawText(\n        'PRESS SPACE TO PLAY AGAIN',\n        this.renderer.width / 2,\n        this.renderer.height / 2 + 70,\n        2,\n        '#f0f'\n      );\n      // Show countdown\n      const countdown = Math.ceil(this.gameOverTimer);\n      this.renderer.drawText(\n        `RETURNING TO MENU IN ${countdown}`,\n        this.renderer.width / 2,\n        this.renderer.height / 2 + 110,\n        2,\n        '#666'\n      );\n    }\n\n    // Always draw HUD when playing or game over\n    if (this.data.state === 'playing' || this.data.state === 'gameOver') {\n      this.drawHUD();\n    }\n\n    // Flush all batched draw calls\n    this.renderer.flush();\n  }\n}\n","import { Game } from './game';\n\n// Entry point - just grab the canvas and start the game\n\nconst canvas = document.getElementById('game-canvas') as HTMLCanvasElement;\n\nif (!canvas) {\n  throw new Error('Could not find game canvas element');\n}\n\nconst game = new Game(canvas);\ngame.start();\n"],"names":["add","b","scale","v","scalar","magnitude","rotate","point","angle","cos","sin","distance","dx","dy","randomRange","min","max","randomInt","angleToVector","GLYPHS","CHAR_WIDTH","CHAR_SPACING","getTextSegments","text","x","y","segments","upperText","cursorX","char","glyph","line","getTextWidth","Renderer","canvas","__publicField","ctx","shape","transform","color","lineWidth","position","rotation","transformed","scaled","rotated","i","next","start","end","alpha","radius","key","batch","textWidth","startX","segment","s","seg","points","p","centerRadius","InputHandler","e","code","isDown","AudioManager","osc","gain","size","duration","startFreq","bufferSize","buffer","data","noise","filter","freq","startTime","SHIP_SHAPE","THRUSTER_SHAPES","ROTATION_SPEED","THRUST_POWER","MAX_SPEED","Ship","dt","direction","acceleration","speed","SIZE_CONFIG","generateAsteroidShape","config","numVerts","r","Asteroid","nextSize","angle1","angle2","BULLET_SPEED","BULLET_LIFETIME","Bullet","DEBRIS_LIFETIME","DEBRIS_SPEED","Debris","shipRotation","shipShape","nextIndex","anyActive","delta","mid","halfLen","rotatedHalf","checkCollision","wrapEntity","entity","width","height","pos","margin","FIRE_COOLDOWN","STARTING_ASTEROIDS","Game","currentTime","keys","asteroid","bullet","d","dir","newAsteroids","a","numAsteroids","count","glowStatus","flameIndex","countdown","game"],"mappings":"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"}